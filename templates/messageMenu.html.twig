{% extends 'base.html.twig' %}

{% block title %}
Mes conversations
{% endblock title %}

{% block withdashboard %}{% endblock withdashboard %}

{% block main_content %}
	<section class="text-sm md:text-base w-full flex flex-col gap-8 items-center justify-center px-2 sm:px-4">

	{{dump(discussion)}}
	
		<h1 class="text-2xl sm:text-3xl font-bold underline bg-slate-300">
			Messagerie
		</h1>

		<div id="message_container" class="w-full h-[24rem] bg-gradient-to-br from-main-green/20 to-main-orange/20 rounded-lg p-2 sm:p-4 flex flex-col sm:flex-row gap-2">
			<div id="message_user_list_container" class="w-full h-fit sm:h-full sm:w-1/3 md:w-1/2 lg:w-1/4 rounded-lg flex-row flex sm:flex-col gap-2 py-1 shadow-inset-xl overflow-x-scroll sm:overflow-y-scroll sm:overflow-x-auto items-center">
				{% for contact in allUserTalkingWith %}
					{% include('/cards/user_talking_with_card.html.twig') %}
				{% endfor %}							
			</div>
			<div id="user_message_container" class="w-full h-[70%] sm:h-full sm:w-2/3 md:w-1/2 lg:w-3/4 rounded-lg flex flex-col justify-between gap-2 p-1 shadow-inset-xl">
				<div class="sm:overflow-y-scroll h-full">
					<div class="user_message w-full h-fit rounded-md group flex odd:justify-start even:justify-end">
						<div class="p-1 flex flex-col">
							<span class="shadow-lg p-2 rounded-md group-odd:bg-main-orange/80 group-even:bg-main-emerald/80">Bonjour, j'aimerai beaucoup rejoindre votre partie !</span>
							<!--start current user message -->
							<div class="w-full h-fit flex justify-start items-center p-0.5">
								<span class="px-2 w-fit text-xs font-bold text-main-brown text-right">Hier 16:12</span>
								<span class="h-4 w-4 bg-main-green rounded-full text-xs text-center">lu</span>
							</div>
							<!--end current user message -->
						</div>
					</div>
					<div class="user_message w-full h-fit rounded-md group flex odd:justify-start even:justify-end">
						<div class="p-1 flex flex-col">
							<span class="shadow-lg p-2 rounded-md group-odd:bg-main-orange/80 group-even:bg-main-emerald/80">Salut Christophe, biensur avec plaisir !</span>
							<!--start other user message -->
							<div class="w-full h-fit flex justify-end items-center p-0.5">
								<span class="h-4 w-4 bg-main-green rounded-full text-xs text-center">lu</span>
								<span class="h-4 w-4 bg-main-brown/50 rounded-full text-xs text-center text-white">v</span>
								<span class="px-2 w-fit text-xs font-bold text-main-brown text-right">Hier 16:18</span>
							</div>	
							<!--end other user message -->
						</div>
					</div>
				</div>
				
				
				{{ form_start(userChatForm,{
						'attr': {'class': 'flex w-full [&>div]:w-[90%] gap-2'},
						}) }}
					{{ form_row(userChatForm.body, {
						'attr': {'class': 'rounded px-1 focus:outline-main-orange w-full'},
						})
					 }}
					<button class="h-7 w-7 rounded border border-main-orange hover:bg-main-green hover:border-main-green bg-main-orange bg-cover bg-center" style="background-image: url('{{ asset('img/content/send.svg') }}');"></button>
				{{ form_end(userChatForm) }}
					

				<!-- <form class="w-full flex gap-2 px-1"> 
					<input class="rounded px-1 focus:outline-main-orange w-[90%]" type="text" name="" id="">
					<button class="h-7 w-7 rounded border border-main-orange hover:bg-main-green hover:border-main-green bg-main-orange bg-cover bg-center" style="background-image: url('{{ asset('img/content/send.svg') }}');"></button>
				</form>-->
					

			</div>
		</div>

	</section>
{% endblock main_content %}
